var Junb=function(){var e=this,n=e.cont=document.getElementById("j-body"),t=e.pages={};return e.oVersion={v:n.getAttribute("data-version"),name:n.getAttribute("data-name"),title:document.title},e.currPage=null,e.pFn={},e.exFn=[],e.preFn=[],e.plen=0,e.async=!0,e.device=e.getDevice(),e.hash=window.location.hash?window.location.hash.substr(1):"",e.dStr="",e.domCtl=__domRevManifest||null,e.extend=function(){if("pubPre"==arguments[0])e.preFn.push(arguments[1]);else if("pub"==arguments[0])e.exFn.push(arguments[1]);else{var n=arguments[arguments.length-1];if("function"==typeof n)e.pFn[arguments[0]]=n;else{if("object"!=typeof n)return;e.pFn[arguments[0]]=arguments[arguments.length-2]}var i={id:arguments[0],title:"string"==typeof arguments[1]?arguments[1]:e.oVersion.title,url:"dom/"+arguments[0]+".html"};t[i.id]={0:null,url:i.url,id:i.id,title:i.title,loaded:!1,hashSubcribe:{},sCateHash:"",opt:function(){if("function"==typeof n)return null;var t={};return n.js&&0!==n.js.length&&("object"==typeof n.js[0]?t.js={pre:{loaded:!1,arr:e.iniRes(n.js[0])},res:{loaded:!1,arr:e.iniRes(n.js.slice(1))}}:t.js={res:{loaded:!1,arr:e.iniRes(n.js)}}),n.style&&0!==n.style.length&&(t.style={res:{loaded:!1,arr:e.iniRes(n.style)}}),t}(),hide:function(){Junb.removeClass(this[0],"on")},show:function(n){var t=this;if(Junb.addClass(t[0],"on"),e.async){if(e.preFn&&0!==e.preFn.length)for(var i=0,a=e.preFn.length;a>i;i++)e.preFn[i](t);var r=e.pFn[t.id];r&&(t.opt?(Junb.loadRes(!(t.opt.js&&t.opt.js.pre)||t.opt.js.pre,function(){r.call(t,function(){Junb.loadRes(!(t.opt.js&&t.opt.js.res)||t.opt.js.res,function(){e.compilePage(t)})})}),!t.opt.style||Junb.loadRes(t.opt.style.res)):r.call(t,function(){e.compilePage(t)}))}else e.async=!0;var o=t.hashSubcribe;if(o){for(var s in o)o[s](n[s]);t.sCateHash=JSON.stringify(n)}}}}},e.listen=function(n,t){e.currPage.hashSubcribe[n]=t},e.iniRes=function(e){for(var n=[],t=0,i=e.length;i>t;t++)n.push({0:e[t],loaded:!1,dom:null});return n},e.iniPages=function(){try{e.loadByHash()}catch(n){}window.addEventListener("hashchange",function(){e.hash=window.location.hash?window.location.hash.substr(1):"",e.loadByHash()},!1)},e.gotoPage=function(n){var i=n.split("&"),a={};if(1!==i.length)for(var r=1;r<i.length;r++){var o=i[r].split("=");a[o[0]]=o[1]}if(e.currPage&&e.currPage.id===i[0])if(e.currPage.id===n){if(e.currPage.sCateHash===JSON.stringify(a))return}else e.async=!1;!function(){var n=t[i[0]],r=e.currPage;r&&r.id===n.id?(e.forLoad(!0),e.currPage.show(a)):(e.currPage=n,"ios"!==e.device.plat&&(document.title=e.currPage.title),n.loaded?(e.forLoad(!0),e.currPage.show(a)):e.loadPage(n.id,function(t){n[0]=e.createPage({"data-page":n.id,"data-page-title":n.title}),n[0].innerHTML=t,n.loaded=!0,e.forLoad(!1),e.currPage.show(a)})),r&&r.hide()}()},e.loadPage=function(n,t){Junb.ajax({url:"dom/"+(e.domCtl?e.domCtl[n]:n)+".html",type:"get",dataType:"string",callback:function(e){t(e)}})},e.loadByHash=function(){e.gotoPage(e.hash)},e.changeHash=function(n,t){window.location.hash=n,e.async=t===!1?t:!0},e.createPage=function(n){var t=document.createElement("div");for(var i in n)t.setAttribute(i,n[i]);return t.className="junb-page",e.cont.appendChild(t),t},e.arrLine=[],e.forLoad=function(n){var t=e.currPage,i=e.arrLine,a=5;if(n){for(var r=0;r<i.length;r++)i[r]===t.id&&i.splice(r,1);i.unshift(t.id)}else i.splice(0,0,t.id);if(i.length>a){for(var r=a;r<i.length;r++){var o=e.pages[i[r]];e.cont.removeChild(o[0]),o.loaded=!1}i.splice(a)}},e.compilePage=function(n){for(var t=n[0].querySelectorAll("[data-href]"),i=0,a=t.length;a>i;i++)!function(n){var i=t[n],a=i.getAttribute("data-href");i.addEventListener("click",function(){var n=i.getAttribute("data-page-async");e.async=!("false"===n),e.changeHash(a,e.async)},!1)}(i);if(e.exFn&&0!==e.exFn.length)for(var r in e.exFn)e.exFn[r](n)},e};Junb.drag=function(e,n){function t(e){var n,t,a={ex:e.x-d.x,ey:e.y-d.y};n={sx:a.ex/10,sy:a.ey/10},t=a.ex>a.ey,cancelAnimationFrame(r),i(n,e,t)}function i(e,t,a){return n?(a?bEnd=Math.abs(t.y-d.y)<Math.abs(e.sy):bEnd=Math.abs(t.x-d.x)<Math.abs(e.sx),bEnd?(d.x=t.x,d.y=t.y,o.style.left=d.x+"px",void(o.style.top=d.y+"px")):(d.x+=e.sx,d.y+=e.sy,o.style.left=d.x+"px",o.style.top=d.y+"px",void(r=requestAnimationFrame(function(){return i(e,t,a)})))):(d.x=t.x,d.y=t.y,o.style.left=d.x+"px",void(o.style.top=d.y+"px"))}function a(e){if(!l)if(n)l=setTimeout(function(){var n=e||window.event,i=n.touches[0];posTouch={x:i.clientX-s.w,y:i.clientY-s.h},requestAnimationFrame(function(){return t(posTouch)}),clearTimeout(l),l=void 0},80);else{var i=e||window.event,a=i.touches[0];posTouch={x:a.clientX-s.w,y:a.clientY-s.h},t(posTouch)}}var r,o="string"==typeof e?document.querySelector(e):e,s={w:~~(o.offsetWidth/2),h:~~(o.offsetHeight/2)},d={x:parseInt(o.offsetLeft),y:parseInt(o.offsetTop)};o.addEventListener("touchstart",function(){o.removeEventListener("touchmove",a,!1)},!1),o.addEventListener("touchend",function(){o.removeEventListener("touchmove",a,!1)},!1);var l},Junb.ajax=function(e){var n=e.callback||function(){},t=e.paras||"",i=e.type||"POST",a=e.async!==!1,r=e.dataType||"json",o=e.url;if("jsonp"===r){var s=e.jsonpCallbackName||"callback",d=e.jsonpCallback||"_"+(new Date).getTime();if(o+=(-1===e.url.indexOf("?")?"?":"&")+s+"="+d,t)for(var l in t)o+="&"+l+"="+t[l];window[d]=n;var c=document.createElement("script");return c.src=o,c.onload=function(){document.head.removeChild(c),delete window[d]},void document.head.insertBefore(c,document.head.childNodes[0])}var u;if(u=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXoect("Microsoft.XMLHTTP"),u.onreadystatechange=function(){var e=null;4==u.readyState&&200==u.status&&(e=u.responseText,"json"==r&&(e=JSON.parse(e)),n(e))},"post"==i){var f="para={";if("object"==typeof i){for(var p in i)f+='"'+p+'":"'+t[p]+'",';f=f.substring(0,f.length-1),f+="}"}else"string"==typeof t&&(f=t);u.open("POST",o,a),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.send(f)}else{var v="";if(t){var h=function(){var e=!1;for(var n in t)v+="&"+n+"="+t[n],e=!0;return e}();v=h?v.substr(1):v,o+=h?(-1===o.indexOf("?")?"?":"&")+v:""}u.open("GET",o,a),u.send()}return u},Junb.loadRes=function(e,n){if(e===!0||e.loaded)return n?n():!0;var t=e.arr;if(/.js$/.test(t[0][0])){var i=0,a=t.length;!function(){if(i>=a)return e.loaded=!0,n();var r=arguments.callee,o=t[i++];if(o.loaded)return r();var s=document.createElement("script");s.src=o[0];try{s.onload=function(){return o.loaded=!0,o.dom=this,r()}}catch(d){}document.body.appendChild(s)}()}else/.css$/.test(t[0][0])&&!function(){for(var i=t.length,a=0,r=0;i>r;r++)t[r].loaded?a++:!function(r){var o=document.createElement("link");o.rel="stylesheet",o.href=t[r][0],o.onload=function(){return t[r].loaded=!0,t[r].dom=o,a++,a>=i?(e.loaded=!0,n?n():!0):void 0},document.head.appendChild(o)}(r)}()},Junb.addClass=function(e,n){if(e instanceof Node){var t=void 0!=document.body.classList;if(t&&e)e.classList.add(n);else if(e&&e instanceof Node){var i=e.className;i?-1===(" "+i+" ").indexOf(" "+n+" ")&&(e.className=i+" "+n):e.className=n}}},Junb.removeClass=function(e,n){if(e instanceof Node){var t=void 0!=document.body.classList;if(t)e.classList.remove(n);else if(e&&e instanceof Node){var i=" "+e.className+" ",a=new RegExp("(\\s|^)"+cls+"(\\s|$)");e.className=i.replace(a," ")}}},Junb.toggleClass=function(e,n){var t=this;if(e instanceof Node){var i=void 0!=document.body.classList;i?e.classList.toggle(n):t.hasClass(e,n)?t.removeClass(e,n):t.addClass(e,n)}},Junb.econt={},Junb.dcont=[],Junb.dcont=[],Junb.etype={tap:{name:"tap",custom:new CustomEvent("tap",{detail:{message:"hallo eventÔºÅ",time:new Date},bubbles:!1,cancelable:!0}),dispatch:function(e){var n=this,t={};t.fnSt=function(n){t.isCli=!0,e.addEventListener("touchmove",t.fnMv,!1),e.addEventListener("touchend",t.fnEd,!1)},e.addEventListener("touchstart",t.fnSt,!1),t.fnMv=function(e){t.isCli=!1},t.fnEd=function(i){e.removeEventListener("touchmove",t.fnMv,!1),e.removeEventListener("touchend",t.fnEd,!1),t.isCli&&e.dispatchEvent(n.custom)}}}},Junb.evStack=function(e,n,t){var i=Junb.dcont.getIndex(e);if(-1===i){var a=Junb.createRandomAlphaNum(8),r=Junb.econt[a]={el:e,arr:[]};r.arr.push({type:n,fn:t}),Junb.dcont.push(e)}else!function(e){e.arr.push({type:n,fn:t})}(function(e){for(var n in Junb.econt){var t=Junb.econt[n];if(t.el===e)return t}}(e))},Junb.on=function(e,n,t){var i=Junb.etype[n];i&&i.dispatch(e),e.addEventListener(n,t,!1),Junb.evStack(e,n,t)},Junb.off=function(e,n,t){!function(e){var i=e.tt;if(n)for(var a=0;a<i.arr.length;a++){var r=i.arr[a];r.type===n&&(t&&t===r.fn?i.el.removeEventListener(n,r.fn):i.el.removeEventListener(n,r.fn),i.arr.splice(a,1))}else for(var a=0;a<i.arr.length;a++){var r=i.arr[a];i.el.removeEventListener(r.type,r.fn)}0===i.arr.length&&delete i.arr,i.arr&&0!==i.arr.length||(Junb.dcont.splice(e.ind,1),delete Junb.econt[e.id],i=null)}(function(e){for(var n in Junb.econt){var t=Junb.econt[n];if(t.el===e)return{tt:t,id:n,ind:Junb.dcont.getIndex(t.el)}}}(e))},Junb.createRandomAlphaNum=function(e){for(var n="";n.length<e;n+=Math.random().toString(36).substr(2));return n.substr(0,e)},Array.prototype.getIndex=function(e){for(var n=0;n<this.length;n++)if(this[n]===e)return n;return-1},Junb.prototype.getDevice=function(){var e=function(){var e={ie:0,gecko:0,webkit:0,khtml:0,opera:0,ver:null},n={ie:0,firefox:0,safari:0,konq:0,opera:0,chrome:0,ver:null},t={win:!1,mac:!1,x11:!1,iphone:!1,ipod:!1,ipad:!1,ios:!1,android:!1,nokiaN:!1,winMobile:!1,wii:!1,ps:!1},i=navigator.userAgent;if(window.opera)e.ver=n.ver=window.opera.version(),e.opera=n.opera=parseFloat(e.ver);else if(/AppleWebKit\/(\S+)/.test(i))if(e.ver=RegExp.$1,e.webkit=parseFloat(e.ver),/Chrome\/(\S+)/.test(i))n.ver=RegExp.$1,n.chrome=parseFloat(n.ver);else if(/Version\/(\S+)/.test(i))n.ver=RegExp.$1,n.safari=parseFloat(n.ver);else{var a=1;a=e.webkit<100?1:e.webkit<312?1.2:e.webkit<412?1.3:2,n.safari=n.ver=a}else/KHTML\/(\S+)/.test(i)||/Konqueror\/([^;]+)/.test(i)?(e.ver=n.ver=RegExp.$1,e.khtml=n.konq=parseFloat(e.ver)):/rv:([^\)]+)\) Gecko\/\d{8}/.test(i)?(e.ver=RegExp.$1,e.gecko=parseFloat(e.ver),/Firefox\/(\S+)/.test(i)&&(n.ver=RegExp.$1,n.firefox=parseFloat(n.ver))):/MSIE ([^;]+)/.test(i)&&(e.ver=n.ver=RegExp.$1,e.ie=n.ie=parseFloat(e.ver));n.ie=e.ie,n.opera=e.opera;var r=navigator.platform;if(t.win=0==r.indexOf("Win"),t.mac=0==r.indexOf("Mac"),t.x11="X11"==r||0==r.indexOf("Linux"),t.win&&/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(i))if("NT"==RegExp.$1)switch(RegExp.$2){case"5.0":t.win="2000";break;case"5.1":t.win="XP";break;case"6.0":t.win="Vista";break;case"6.1":t.win="7";break;default:t.win="NT"}else"9x"==RegExp.$1?t.win="ME":t.win=RegExp.$1;return t.iphone=i.indexOf("iPhone")>-1,t.ipod=i.indexOf("iPod")>-1,t.ipad=i.indexOf("iPad")>-1,t.nokiaN=i.indexOf("NokiaN")>-1,"CE"==t.win?t.winMobile=t.win:"Ph"==t.win&&/Windows Phone OS (\d+.\d+)/.test(i)&&(t.win="Phone",t.winMobile=parseFloat(RegExp.$1)),t.mac&&i.indexOf("Mobile")>-1&&(/CPU (?:iPhone )?OS (\d+_\d+)/.test(i)?t.ios=parseFloat(RegExp.$1.replace("_",".")):t.ios=2),/Android (\d+\.\d+)/.test(i)&&(t.android=parseFloat(RegExp.$1)),t.wii=i.indexOf("Wii")>-1,t.ps=/playstation/i.test(i),{engine:e,browser:n,system:t}}(),n=!1,t=!1,i=navigator.userAgent.toLowerCase(),a=!1,r=!1;if(-1!=i.indexOf("applewebkit"))if(e.system.iphone||e.system.ipad){t="ios",-1!=i.indexOf("6_")&&(a=6),-1!=i.indexOf("7_")&&(a=7),-1!=i.indexOf("8_")&&(a=8),-1!=i.indexOf("8_0")&&(a=8),-1!=i.indexOf("8_1")&&(a=8.1),-1!=i.indexOf("8_2")&&(a=8.2),-1!=i.indexOf("8_3")&&(a=8.3),-1!=i.indexOf("8_4")&&(a=8.4),-1!=i.indexOf("9_")&&(a=9),n=-1!=i.indexOf("micromessenger")?"ios_weixin":-1!=i.indexOf("version")&&-1!=i.indexOf("safari")?"safari":"desktop";var o=(window.screen.width,window.screen.height);480==o&&(r="iphone4"),568==o&&(r="iphone5"),667==o&&(r="iphone6"),736==o&&(r="iphone6p")}else e.system.android&&(t="android",-1!=i.indexOf("micromessenger")?n="android_weixin":-1!=i.indexOf("chrome")&&(n="chrome"));return{ua:i,platV:a,plat:t,iphoneN:r,uPlat:n}};